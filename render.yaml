# Configuração do Blueprint do Render: render.yaml

# Este é o arquivo Blueprint para o Render, que define todos os serviços
# necessários para sua aplicação.

version: services

services:
  # 1. Serviço de Banco de Dados PostgreSQL
  - type: pserv
    name: meuprojetophp-db
    plan: free
    databaseName: placar_db
    user: placar_user

  # 2. Serviço Web PHP (que usa o Dockerfile)
  - type: web
    name: meuprojetophp-web
    plan: free
    # ESTA LINHA É CRUCIAL: Diz ao Render para usar a URL do seu repositório atual
    repo: '{{.RepositoryURL}}' 
    branch: main
    runtime: docker
    
    # Comando de inicialização
    startCommand: 'php -S 0.0.0.0:10000 -t /app'
    
    # A porta que seu servidor PHP escuta
    port: 10000
    
    # Variáveis de Ambiente
    envVars:
      # Vínculo Secreto (Secret Reference)
      - key: DATABASE_URL
        fromDatabase:
          name: meuprojetophp-db
          property: connectionString
      
      - key: APP_ENV
        value: production
